(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],Array(20).concat([function(e,t,a){},,,,,,,function(e,t,a){},,function(e,t,a){},function(e,t,a){},,,,function(e,t,a){e.exports=a.p+"static/media/208_pwSymbol_01.ab9ed648.jpg"},function(e,t,a){e.exports=a(114)},,,,,function(e,t,a){},,,,,,,function(e,t,a){},function(e,t,a){var n={"./symbol_id_0.svg":49,"./symbol_id_1.svg":50,"./symbol_id_10.svg":51,"./symbol_id_11.svg":52,"./symbol_id_12.svg":53,"./symbol_id_13.svg":54,"./symbol_id_14.svg":55,"./symbol_id_15.svg":56,"./symbol_id_16.svg":57,"./symbol_id_17.svg":58,"./symbol_id_18.svg":59,"./symbol_id_19.svg":60,"./symbol_id_2.svg":61,"./symbol_id_20.svg":62,"./symbol_id_21.svg":63,"./symbol_id_22.svg":64,"./symbol_id_23.svg":65,"./symbol_id_24.svg":66,"./symbol_id_25.svg":67,"./symbol_id_26.svg":68,"./symbol_id_27.svg":69,"./symbol_id_28.svg":70,"./symbol_id_29.svg":71,"./symbol_id_3.svg":72,"./symbol_id_30.svg":73,"./symbol_id_31.svg":74,"./symbol_id_32.svg":75,"./symbol_id_33.svg":76,"./symbol_id_34.svg":77,"./symbol_id_35.svg":78,"./symbol_id_36.svg":79,"./symbol_id_37.svg":80,"./symbol_id_38.svg":81,"./symbol_id_39.svg":82,"./symbol_id_4.svg":83,"./symbol_id_40.svg":84,"./symbol_id_41.svg":85,"./symbol_id_42.svg":86,"./symbol_id_43.svg":87,"./symbol_id_44.svg":88,"./symbol_id_45.svg":89,"./symbol_id_46.svg":90,"./symbol_id_47.svg":91,"./symbol_id_48.svg":92,"./symbol_id_49.svg":93,"./symbol_id_5.svg":94,"./symbol_id_50.svg":95,"./symbol_id_51.svg":96,"./symbol_id_52.svg":97,"./symbol_id_53.svg":98,"./symbol_id_54.svg":99,"./symbol_id_55.svg":100,"./symbol_id_56.svg":101,"./symbol_id_57.svg":102,"./symbol_id_58.svg":103,"./symbol_id_59.svg":104,"./symbol_id_6.svg":105,"./symbol_id_60.svg":106,"./symbol_id_61.svg":107,"./symbol_id_62.svg":108,"./symbol_id_63.svg":109,"./symbol_id_7.svg":110,"./symbol_id_8.svg":111,"./symbol_id_9.svg":112};function o(e){var t=l(e);return a(t)}function l(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=l,e.exports=o,o.id=48},function(e,t,a){e.exports=a.p+"static/media/symbol_id_0.edcd7874.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_1.45b45f0d.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_10.26c84b15.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_11.7a34f769.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_12.03f08dd1.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_13.304c987e.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_14.a01fca40.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_15.7c0af7f0.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_16.34951976.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_17.c0d22678.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_18.00e473ef.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_19.467d1575.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_2.11fbfa25.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_20.363ef301.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_21.108ad36b.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_22.fcb14f0e.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_23.73284f3c.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_24.c75c4c27.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_25.2ed65305.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_26.177486b1.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_27.9e3c6af6.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_28.cb3ca879.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_29.e6e48b74.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_3.72f5d34b.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_30.547222e3.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_31.4b9e7bcd.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_32.142f1e6f.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_33.26c05ea2.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_34.5c514123.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_35.dc2d4ae0.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_36.2a36aa27.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_37.99723549.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_38.1be3e9b4.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_39.0e8dbdfa.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_4.9021a8e9.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_40.58e44aa6.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_41.8481aae0.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_42.0fc56214.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_43.f82bf1fb.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_44.9d15839d.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_45.d1678570.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_46.33f20a0b.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_47.f0579746.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_48.815635e5.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_49.09f701c3.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_5.840dffff.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_50.7caa5c21.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_51.d54663a1.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_52.0a0efd31.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_53.ff955daf.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_54.79ace74a.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_55.a1b6963c.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_56.5116042e.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_57.1e69196c.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_58.e000fcce.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_59.8417e159.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_6.1b2a0cc9.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_60.0b843b2d.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_61.d4006bb3.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_62.d7efd0c8.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_63.2bf5840f.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_7.82e811b7.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_8.2d0ca8d3.svg"},function(e,t,a){e.exports=a.p+"static/media/symbol_id_9.380cb590.svg"},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),l=a(31),s=a.n(l),i=(a(40),a(1)),r=a(2),c=a(4),u=a(3),d=a(5),p=a(7),m=a(16),f=(a(27),a(8)),h=a(19),b=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"initializeSession",value:function(){void 0===Object(f.a)(this,v)[v]&&void 0===Object(f.a)(this,y)[y]&&void 0===Object(f.a)(this,S)[S]&&e.resetSession()}},{key:"getSessionUser",value:function(){return e.initializeSession(),Object(f.a)(this,v)[v]}},{key:"getSessionUserID",value:function(){return e.initializeSession(),Object(f.a)(this,g)[g]}},{key:"getCollectionName",value:function(){return e.initializeSession(),Object(f.a)(this,S)[S]}},{key:"getCollectionID",value:function(){return e.initializeSession(),Object(f.a)(this,_)[_]}},{key:"getSessionStatus",value:function(){return e.initializeSession(),Object(f.a)(this,y)[y]}},{key:"resetSession",value:function(){Object(f.a)(this,S)[S]="",Object(f.a)(this,g)[g]=0,Object(f.a)(this,_)[_]=0,Object(f.a)(this,v)[v]="",Object(f.a)(this,y)[y]=!1}},{key:"getSessionInfo",value:function(){return e.initializeSession(),{ColName:Object(f.a)(this,S)[S],LoginID:Object(f.a)(this,g)[g],ColID:Object(f.a)(this,_)[_],LoginName:Object(f.a)(this,v)[v],isAuth:Object(f.a)(this,y)[y]}}},{key:"setSessionState",value:function(t){e.initializeSession(),Object(f.a)(this,y)[y]=t}},{key:"setLoginUser",value:function(t){e.initializeSession(),Object(f.a)(this,v)[v]=t}},{key:"setCollectionName",value:function(t){e.initializeSession(),Object(f.a)(this,S)[S]=t}},{key:"setCollectionID",value:function(t){e.initializeSession(),Object(f.a)(this,_)[_]=t}},{key:"setLoginUserID",value:function(t){e.initializeSession(),Object(f.a)(this,g)[g]=t}}]),e}(),v=Object(h.a)("LoginUser"),g=Object(h.a)("LoginUserID"),y=Object(h.a)("isAuth"),S=Object(h.a)("CollectionName"),_=Object(h.a)("CollectionID");Object.defineProperty(b,v,{writable:!0,value:void 0}),Object.defineProperty(b,g,{writable:!0,value:void 0}),Object.defineProperty(b,y,{writable:!0,value:void 0}),Object.defineProperty(b,S,{writable:!0,value:void 0}),Object.defineProperty(b,_,{writable:!0,value:void 0});var O=b,E=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:"./"},o.a.createElement("button",{type:"button"},"Home"))}}]),t}(n.Component),C=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).signout=function(e){e.preventDefault(),window.confirm("Are you sure you want to log out?")&&(O.resetSession(),a.props.history.push("./"))},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("button",{type:"button",onClick:this.signout},"Sign Out")}}]),t}(n.Component),j=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:"./collections?page=default"},o.a.createElement("button",{type:"button"},"Your Collections"))}}]),t}(n.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:"./login"},o.a.createElement("button",{type:"button"},"Login"))}}]),t}(n.Component),P=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).ButtonTextChange=function(){return a.state.disabled?"Data Up to Date":"Update Scryfall Data"},a.state={disabled:!0},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/fetch-card/check-updateable").then((function(e){return e.json()})).then((function(t){-1===t?e.setState({disabled:!1}):e.setState({disabled:!0})}))}},{key:"render",value:function(){return o.a.createElement(p.b,{to:"./downloads?func=fetch-card%2Fdownload-bulk-data"},o.a.createElement("button",{type:"button",disabled:this.state.disabled},this.ButtonTextChange(),this.state.disabled))}}]),t}(n.Component),D=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:"./userlist"},o.a.createElement("button",{variant:"raised"},"Users"))}}]),t}(n.Component),w=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:"./setup"},o.a.createElement("button",{variant:"raised"},"Set up Database"))}}]),t}(n.Component),T=a(34),k=a.n(T),N=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("img",{src:k.a,alt:"PW Symbol"})}}]),t}(n.Component),I=(a(29),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{class:"home_page"},o.a.createElement("div",null,o.a.createElement("h1",null,"MTG Card Manager")),o.a.createElement("div",null,this.renderWelcomeUser()),o.a.createElement("div",null,o.a.createElement(N,null)),o.a.createElement("div",null,o.a.createElement(D,null),this.renderLoginCollectionButton(),this.renderDBButton(),o.a.createElement(P,null)))}},{key:"renderWelcomeUser",value:function(){return""!==O.getSessionUser()?o.a.createElement("h1",null," Welcome ",O.getSessionUser()," "):null}},{key:"renderLoginCollectionButton",value:function(){return!0===O.getSessionStatus()?o.a.createElement(j,null):o.a.createElement(x,null)}},{key:"renderDBButton",value:function(){return!0===O.getSessionStatus()?null:o.a.createElement(w,null)}}]),t}(n.Component)),R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).getList=function(){fetch("/api/getList").then((function(e){return e.json()})).then((function(e){return a.setState({list:e})}))},a.state={list:[]},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.getList()}},{key:"render",value:function(){var e=this.state.list;return o.a.createElement("div",{className:"App"},o.a.createElement("h1",null,"List of Users"),e.length?o.a.createElement("div",null,e.map((function(e){return o.a.createElement("div",null,e)}))):o.a.createElement("div",null,o.a.createElement("h2",null,"No Users Found")),o.a.createElement(p.b,{to:"./"},o.a.createElement("button",{type:"button"},"Back to Homepage")))}}]),t}(n.Component),L=a(10),B=a(6),U=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:"./signup"},o.a.createElement("button",{type:"button"},"Sign Up Now!"))}}]),t}(n.Component),A=a(15),J=a.n(A),F=a(18);function M(e,t){return z.apply(this,arguments)}function z(){return(z=Object(F.a)(J.a.mark((function e(t,a){var n,o,l,s,i,r=arguments;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:void 0,e.next=3,fetch(t,n);case 3:return o=e.sent,e.next=6,o.json();case 6:if(e.t0=e.sent,e.t1=o.status,l={data:e.t0,status:e.t1},s=l.data,i=l.status,!a){e.next=15;break}return e.abrupt("return",a(s,200!==i||null));case 15:return e.abrupt("return",{data:s,error:null,loaded:!0,fetching:!1});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderLoginForm=function(){return o.a.createElement("form",{method:"post",onSubmit:a.handleSubmit},o.a.createElement("title",null,"Login Form"),o.a.createElement("div",null,"Login"),o.a.createElement("div",null,"Name:"),o.a.createElement("input",{type:"text",name:"name",value:a.state.formControls.name.value,onChange:a.handleChange}),o.a.createElement("div",null,"Password:"),o.a.createElement("input",{type:"password",name:"password",value:a.state.formControls.password.value,onChange:a.handleChange}),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Submit"),o.a.createElement(E,null),o.a.createElement(U,null)),a.state.postResponse)},a.handleSubmit=function(e){e.preventDefault(),M("/api/login/submit-form",(function(e,t){if(t)a.setState({postResponse:"Login Failed."});else{var n=e;O.setSessionState(!0),O.setLoginUser(n.username),O.setLoginUserID(n.id),a.props.history.push({pathname:"/collections",search:"?page=default",state:{page:"default"}})}}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})},a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n})))})},a.state={formControls:{name:{value:""},password:{value:""}},postResponse:""},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){alert("LoginPage "+e)}},{key:"render",value:function(){return this.renderLoginForm()}}]),t}(n.Component),W=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderSignupForm=function(){return o.a.createElement("form",{method:"post",onSubmit:a.handleSubmit},o.a.createElement("title",null,"Signup Form"),o.a.createElement("div",null,"Sign Up Today!"),o.a.createElement("div",null,"Email:"),o.a.createElement("input",{type:"text",name:"email",value:a.state.formControls.email.value,onChange:a.handleChange}),o.a.createElement("div",null,"Name:"),o.a.createElement("input",{type:"text",name:"name",value:a.state.formControls.name.value,onChange:a.handleChange}),o.a.createElement("div",null,"Password:"),o.a.createElement("input",{type:"password",name:"password",value:a.state.formControls.password.value,onChange:a.handleChange}),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Submit"),o.a.createElement(E,null),o.a.createElement(p.b,{to:"./login"},o.a.createElement("button",{type:"button"},"Back"))),o.a.createElement("p",null,a.state.postResponse))},a.handleSubmit=function(){var e=Object(F.a)(J.a.mark((function e(t){var n,o;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/api/create-new-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)});case 3:return n=e.sent,e.next=6,n.text();case 6:o=e.sent,a.setState({postResponse:o});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n})))})},a.state={formControls:{name:{value:""},password:{value:""},email:{value:""}},postResponse:""},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.renderSignupForm()}}]),t}(n.Component),H=a(9),Y=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:"./collections?page=create-new-collection"},o.a.createElement("button",{type:"button"},"Create New Collection"))}}]),t}(n.Component),$=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:this.props.link_url},o.a.createElement("button",{type:"button"},"Select"))}}]),t}(n.Component),G=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement(p.b,{to:this.props.link_url},o.a.createElement("button",{type:"button"},"Edit"))}}]),t}(n.Component),q=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("button",{type:"button",onClick:this.props.popup},this.props.text)}}]),t}(n.Component),K=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).deleteCollection=function(e){e.preventDefault();window.confirm("Are you sure you want to delete this collection?")&&fetch("/api/collections/delete-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({collectionID:a.state.id})}).then((function(){a.props.updateTopmostState()}))},a.state={id:a.props.col_id},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.state.id!==this.props.col_id?(this.setState({id:this.props.col_id}),null):o.a.createElement("button",{type:"button",onClick:this.deleteCollection},"Delete")}}]),t}(n.Component),Z=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).loadImage=function(e,t){void 0!==e&&""!==e&&fetch("/api/cards/retrieve-cached-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cardObj:e,image_type:t})}).then((function(e){return e.json()})).then((function(e){a.state.cardImageURI!==e.uri&&a.setState({cardImageObj:e.data,cardImageURI:e.uri,imageType:e.imgType})}))},a.loadImageByID=function(e,t){fetch("/api/collections/fetch-card-object",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card_id:e})}).then((function(e){return e.json()})).then((function(e){a.loadImage(e[0],t)}))},a.state={defaultCSS:{width:"100%",height:"100%",padding:"0",margin:"0"},cardImageURI:"",cardImageObj:"",imageType:""},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return"id"===this.props.paramsType?this.loadImageByID(this.props.id,this.props.imgType):this.loadImage(this.props.cardObj,this.props.imgType),""===this.state.cardImageObj||""===this.state.imageType?""===this.state.cardImageURI?o.a.createElement("div",{style:this.state.defaultCSS}):o.a.createElement("img",{src:this.state.cardImageURI,alt:this.state.cardImageURI,style:this.state.defaultCSS}):o.a.createElement("img",{src:"data:img/".concat(this.state.imageType,";base64,").concat(this.state.cardImageObj.toString("base64")),alt:this.state.itemName,style:this.state.defaultCSS})}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderTableElem=function(){var e=a.state.item;return""!==e.collection_name?o.a.createElement("div",{class:a.props.currCSS},o.a.createElement("div",{style:{flex:2},class:"shrunk_preview_panel"},o.a.createElement(Z,{cardObj:a.state.cardObj,imgType:{type:"art_crop"}})),o.a.createElement("div",{style:{flex:2}},e.collection_name),o.a.createElement("div",{style:{flex:7}},e.description),o.a.createElement("div",{style:{flex:1}},e.card_count),o.a.createElement("div",{style:{flex:1}},"$",e.sum),o.a.createElement("div",{style:{flex:2}},o.a.createElement($,{link_url:a.props.link_url}),o.a.createElement(G,{link_url:a.props.edit_url}),o.a.createElement(K,{col_id:e.id,updateTopmostState:a.props.updateTopmostState})),o.a.createElement("div",{style:{flex:1}},o.a.createElement("button",{onClick:a.handleJSONDownload},"As JSON")),o.a.createElement("div",{style:{flex:1}},o.a.createElement("button",{onClick:a.handleCSVDownload},"As CSV"))):null},a.loadChanges=function(){JSON.stringify(a.state.item)!==JSON.stringify(a.props.item)&&(0===a.props.item.showcase_card_id?a.setState({item:a.props.item}):a.loadCardObj(a.props.item.showcase_card_id,(function(e){a.setState({item:a.props.item,cardObj:e})})))},a.loadCardObj=function(e,t){M("/api/collections/fetch-card-object",(function(e,a){a?alert(a):(e=e[0],t(void 0!==e?e:""))}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card_id:e})})},a.handleJSONDownload=function(){fetch("/api/collections/fetch-collection-as-JSON",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.state.id_key})}).then((function(e){e.blob().then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="".concat(a.state.item.collection_name,".json"),n.click()}))}))},a.handleCSVDownload=function(){fetch("/api/collections/fetch-collection-as-CSV",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:a.state.id_key})}).then((function(e){e.blob().then((function(e){var t=window.URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="".concat(a.state.item.collection_name,".csv"),n.click()}))}))},a.state={item:"",id_key:a.props.id_key,cardObj:""},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.loadChanges(),this.renderTableElem()}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderListingTitle=function(){return o.a.createElement("div",{class:"listing_title"},o.a.createElement("div",{style:{flex:2}}),o.a.createElement("div",{style:{flex:2}},"Name"),o.a.createElement("div",{style:{flex:7}},"Description"),o.a.createElement("div",{style:{flex:1}},"Cards"),o.a.createElement("div",{style:{flex:1}},"Price"),o.a.createElement("div",{style:{flex:2}},"Options"),o.a.createElement("div",{style:{flex:2}},"Download Collection"))},a.renderListingItems=function(){var e="listing_elem_gray";return a.state.collectionList.map((function(t){return e="listing_elem_gray"===e?"listing_elem_white":"listing_elem_gray",""!==t.name?o.a.createElement(Q,{link_url:"/collections?page=selected&id=".concat(t.id,"&name=").concat(encodeURIComponent(t.collection_name)),edit_url:"/collections?page=edit&id=".concat(t.id,"&name=").concat(encodeURIComponent(t.collection_name)),item:t,id_key:t.id,currCSS:e,updateTopmostState:a.props.updateState}):null}))},a.loadList=function(){fetch("/api/collections/get-list-of-collections-by-id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.json()})).then((function(e){0===e.length&&"You have no collections. =("!==a.state.postresponse?a.setState({postresponse:"You have no collections. =("}):JSON.stringify(a.state.collectionList)!==JSON.stringify(e)&&a.setState({collectionList:e,postresponse:""})}))},a.state={collectionList:[],username:O.getSessionUser(),userID:O.getSessionUserID(),postresponse:"Fetching Data..."},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){alert("ListingsTable "+e)}},{key:"render",value:function(){this.loadList();var e=this.state.collectionList;return o.a.createElement("div",null,e.length?o.a.createElement("div",null,this.renderListingTitle(),this.renderListingItems()):o.a.createElement("div",null),o.a.createElement("h2",null,this.state.postresponse))}}]),t}(n.Component),ee=(a(20),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).updateState=function(){a.setState({loading:"..."})},a.state={loading:""},a.updateState.bind(Object(H.a)(a)),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){alert("ListingsMainPage "+e)}},{key:"render",value:function(){return o.a.createElement("div",{class:"listing_main_page"},o.a.createElement("div",null,o.a.createElement("h1",null,O.getSessionUser(),"'s Collection:")),o.a.createElement(X,{updateState:this.updateState}),o.a.createElement("div",null,o.a.createElement(E,null),o.a.createElement(C,{history:this.props.history}),o.a.createElement(Y,null)))}}]),t}(n.Component)),te=(a(47),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{class:"popup_outer"},o.a.createElement("div",{class:"popup_body"},o.a.createElement("div",{class:"popup_main_panel"},o.a.createElement("div",{class:"popup_result_panel"},this.props.content),o.a.createElement("button",{onClick:this.props.closePopup},"Close"))))}}]),t}(n.Component)),ae=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderSearchBox=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{backgroundColor:"gray"}},o.a.createElement("div",{style:{display:"inline"}},"Search Card:  ",o.a.createElement("input",{type:"text",name:"cardName",value:a.state.formControls.cardName.value,onChange:a.changeHandler,style:{width:"70%",right:0}}),o.a.createElement("input",{type:"text",name:"cardID",value:a.state.cardID,disabled:"true",style:{width:"6%",right:0}})),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("button",{onClick:a.handleSubmit,disabled:!a.state.submittable},"Submit"))),o.a.createElement("div",{style:{backgroundColor:"gray",height:"2px"}}))},a.renderResults=function(){return o.a.createElement("div",{class:"popup_search_dropdown"},a.state.postResponse.map((function(e){return o.a.createElement(ne,{setChosenCard:a.setChosenCard.bind(Object(H.a)(a)),item:e})})))},a.changeHandler=function(e){e.preventDefault();var t=e.target.name,n=e.target.value,o=a.state.cardID;""!==a.state.cardID&&(o=""),a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n}))),cardID:o,submittable:!1},(function(){fetch("/api/cards/query-card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.text()})).then((function(e){(e=JSON.parse(e))!==a.state.postResponse&&a.setState({postResponse:e})})).catch((function(e){alert(e)}))}))},a.handleSubmit=function(e){e.preventDefault(),a.props.setPreviewThenTogglePopup(a.state.cardID,a.state.formControls.cardName.value)},a.setChosenCard=function(e,t){a.setState({formControls:{cardName:{value:e}},cardID:t,submittable:!0},(function(){fetch("/api/cards/query-card",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.text()})).then((function(e){(e=JSON.parse(e))!==a.state.postResponse&&a.setState({postResponse:e})})).catch((function(e){alert(e)}))}))},a.state={formControls:{cardName:{value:""}},postResponse:[],submittable:!1,cardID:""},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("SearchPopupBody "+e+t)}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderSearchBox(),this.renderResults())}}]),t}(n.Component),ne=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(c.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).handleSelect=function(e){a.props.setChosenCard(a.props.item.name,a.props.item.card_id)},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{class:"popup_result_hoverable",onClick:this.handleSelect},"ID: ".concat(this.props.item.card_id," -- ").concat(this.props.item.name," [").concat(this.props.item.set.toUpperCase(),"]"))}}]),t}(n.Component),oe=ae,le=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderSearchBox=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{backgroundColor:"gray"}},o.a.createElement("div",{style:{display:"inline"}},"Upload List:  ",o.a.createElement("input",{type:"file",name:"filelist",value:a.state.filename,accept:".txt,.csv,.json",onChange:a.handleChange,style:{width:"70%",right:0}})),o.a.createElement("div",{style:{display:"inline"}},o.a.createElement("button",{onClick:a.handleSubmit,disabled:!a.state.submittable},"Submit"))),o.a.createElement("div",{style:{backgroundColor:"gray",height:"2px"}}))},a.renderResults=function(){return o.a.createElement("div",{class:"popup_search_dropdown"},a.state.fileContent)},a.loadFileContent=function(){var e=new FileReader;e.onload=function(t){a.setState({fileContent:e.result})},a.state.file&&e.readAsText(a.state.file)},a.handleChange=function(e){e.preventDefault();var t=e.target.files[0],n=e.target.value;a.setState({filename:n,file:t,submittable:!0},a.loadFileContent)},a.handleSubmit=function(e){e.preventDefault(),a.props.setFileUploadThenTogglePopup(a.state.file)},a.state={filename:"",file:null,fileContent:null,submittable:!1},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("FileUploadPopupBody "+e+t)}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderSearchBox(),this.renderResults())}}]),t}(n.Component),se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderPopup=function(){var e;switch(a.state.showPopup){case 1:e=o.a.createElement(te,{closePopup:a.togglePopup.bind(Object(H.a)(a)),content:o.a.createElement(oe,{setPreviewThenTogglePopup:a.setPreviewThenTogglePopup.bind(Object(H.a)(a)),defaultPreview:a.state.formControls.preview})});break;case 2:e=o.a.createElement(te,{closePopup:a.togglePopup.bind(Object(H.a)(a)),content:o.a.createElement(le,{setFileUploadThenTogglePopup:a.setFileUploadThenTogglePopup.bind(Object(H.a)(a))})});break;default:e=null}return e},a.handleSubmit=function(e){e.preventDefault(),fetch("/api/collections/create-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.json()})).then((function(e){-2===e?a.setState({postResponse:"Collection not created."}):-1===e?a.setState({postResponse:"Name cannot be empty."}):-3===e?a.setState({postResponse:"Something wrong happened. Please relog in and try again."}):a.props.history.push({pathname:"/collections",search:"?page=default",state:{page:"default"}})}))},a.handleChange=function(e){var t=e.target.name,n=e.target.value;a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n})))})},a.handleCardSearch=function(e){e.preventDefault(),a.togglePopup(1)},a.handleFileUpload=function(e){e.preventDefault(),a.togglePopup(2)},a.handleClearFile=function(e){e.preventDefault(),a.setState({file:null})},a.togglePopup=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState({showPopup:e})},a.setPreviewThenTogglePopup=function(e,t){var n=Object(B.a)({},a.state.formControls);n.preview.value=e,a.setState({showPopup:!1,formControls:n,previewCardName:t})},a.setFileUploadThenTogglePopup=function(e){a.setState({file:e,showPopup:!1})},a.state={formControls:{name:{value:""},desc:{value:""},preview:{value:0}},postResponse:"",userID:O.getSessionUserID(),showPopup:!1,file:null},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("CreateCollectionPage "+e+t)}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderForm(),this.renderPopup())}},{key:"renderForm",value:function(){return o.a.createElement("form",{method:"post",onSubmit:this.handleSubmit},o.a.createElement("title",null,"Create Collection"),o.a.createElement("h1",null,"Create a New Collection"),o.a.createElement("div",null,"Name:"),o.a.createElement("input",{type:"text",name:"name",cols:"35",value:this.state.formControls.name.value,onChange:this.handleChange}),o.a.createElement("div",null,"Description (Optional):"),o.a.createElement("textarea",{type:"text",name:"desc",value:this.state.formControls.desc.value,onChange:this.handleChange,cols:"35",wrap:"soft"}),o.a.createElement("div",null,"Upload Custom List (Optional):"),o.a.createElement("div",null,o.a.createElement("i",null,this.state.file?this.state.file.name:null)),o.a.createElement("div",null,this.state.file?o.a.createElement("button",{onClick:this.handleFileUpload},"Change File"):o.a.createElement("button",{onClick:this.handleFileUpload},"Upload File"),this.state.file?o.a.createElement("button",{onClick:this.handleClearFile},"Clear File"):null),o.a.createElement("div",null," Add Preview Card (Optional): "),o.a.createElement("div",null,o.a.createElement("button",{onClick:this.handleCardSearch},"Search Card")),o.a.createElement("div",null,"ID: ".concat(this.state.formControls.preview.value)),o.a.createElement("div",{class:"preview_panel"},o.a.createElement(Z,{id:this.state.formControls.preview.value,paramsType:"id",imgType:{type:"art_crop"}})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Submit"),o.a.createElement(E,null),o.a.createElement(j,null)),this.state.postResponse)}}]),t}(n.Component),ie=function(){var e="",t=window.location.href.split("?")[1];return t?(t.split("&").forEach((function(t){var a=t.split("=");e=e.concat(',"'+decodeURIComponent(a[0])+'":"'+decodeURIComponent(a[1])+'"')})),e="{"+(e=e.toString().substring(1))+"}",JSON.parse(e)):{}},re=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderForm=function(){return o.a.createElement("div",null,o.a.createElement("form",{method:"post",onSubmit:a.handleSubmit},o.a.createElement("title",null,"Edit Collection"),o.a.createElement("div",null,"Edit Collection"),o.a.createElement("div",null," Name: "),o.a.createElement("input",{type:"text",name:"name",value:a.state.formControls.name.value,onChange:a.handleChange}),o.a.createElement("div",null," Description: "),o.a.createElement("textarea",{type:"text",name:"desc",value:a.state.formControls.desc.value,onChange:a.handleChange,cols:"35",wrap:"soft"}),o.a.createElement("div",null," Add Preview Card: "),o.a.createElement("div",null,"ID: ".concat(a.state.formControls.preview.value)),o.a.createElement("div",{class:"preview_panel"},o.a.createElement(Z,{id:a.state.formControls.preview.value,paramsType:"id",imgType:{type:"art_crop"}})),o.a.createElement(q,{popup:a.handleCardSearch.bind(Object(H.a)(a)),text:"Search Card"}),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"Submit"),o.a.createElement(E,null),o.a.createElement(j,null)),a.state.postResponse))},a.renderPopupWindow=function(){var e;switch(a.state.showPopup){case 1:e=o.a.createElement(te,{closePopup:a.togglePopup.bind(Object(H.a)(a)),content:o.a.createElement(oe,{defaultPreview:a.state.formControls.preview,setPreviewThenTogglePopup:a.setPreviewThenTogglePopup.bind(Object(H.a)(a))})});break;default:e=null}return e},a.loadDefaultValue=function(){M("/api/collections/get-list",(function(e,t){if(t)alert(t);else{var n=e.filter((function(e){return e.id.toString()===a.state.collectionID}))[0],o=Object(B.a)({},a.state.formControls);o.name.value=n.collection_name,o.desc.value=n.description,o.preview.value=n.showcase_card_id,a.setState({formControls:o})}}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})},a.handleSubmit=function(e){if(e.preventDefault(),0===a.state.formControls.name.value.replace(/^\s+$/,"").length)return a.setState({postResponse:"Name cannot be empty!"}),null;M("/api/collections/edit-collection",(function(e,t){t?a.setState({postResponse:"Collection not editted. Please try again, or go back to your collections, or login again."}):a.props.history.push({pathname:"/collections",search:"?page=default",state:{page:"default"}})}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})},a.handleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n})))})},a.handleCardSearch=function(e){e.preventDefault(),a.togglePopup(1)},a.togglePopup=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];a.setState({showPopup:e})},a.setPreviewThenTogglePopup=function(e,t){var n=Object(B.a)({},a.state.formControls);n.preview.value=e,a.setState({showPopup:!a.state.showPopup,formControls:n,previewCardName:t})},a.state={userID:O.getSessionUserID(),collectionID:ie().id,formControls:{name:{value:""},desc:{value:""},preview:{value:""}},previewCardName:"NONE",postResponse:"",showPopup:!1},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){alert("EditCollectionPage "+e)}},{key:"componentDidMount",value:function(){this.loadDefaultValue()}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderForm(),this.renderPopupWindow())}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).state={redirect:"Downloading Data..."},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.readURLAsJSONAPIString(),t="/api/".concat(JSON.parse(e).func);fetch(t).then((function(e){return e.json()})).then((function(e){alert(e)})),this.props.history.goBack()}},{key:"readURLAsJSONAPIString",value:function(){var e="";return e="{"+(e=(e=window.location.href.split("?").slice(1).map((function(t){var a;return a=t.replace("%2F","/").split("="),e=e.concat(',"'+a[0]+'":"'+a[1]+'"')}))).toString().substring(1))+"}"}},{key:"render",value:function(){return o.a.createElement("div",null,this.state.redirect)}}]),t}(n.Component),ue=(a(30),function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("button",{onClick:this.props.onClick},"Switch to List View")}}]),t}(n.Component)),de=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("button",{onClick:this.props.onClick},"Switch to Detailed View")}}]),t}(n.Component),pe=function e(){Object(i.a)(this,e)};pe.retrieveWebkit=function(){return pe.listOfManaIcons||(pe.listOfManaIcons=a(48)),pe.listOfManaIcons};var me=pe,fe=function(){var e=Object(F.a)(J.a.mark((function e(t){var a,n,o;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==t&&""!==t){e.next=2;break}return e.abrupt("return",[]);case 2:return a=(a=t.replace(/\s+/g,"").split("{").slice(1)).map((function(e){return"{".concat(e)})),e.next=6,fetch("/api/cards/fetch-list-of-mana-symbols",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 6:return n=e.sent,e.next=9,n.json();case 9:return o=e.sent,e.abrupt("return",o.data);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).updateManaCost=function(){var e,t=a.props.cardObj;""!==(e=(e="transform"===t.layout?t.card_faces.map((function(e){return e.mana_cost})).join(""):"adventure"===t.layout?t.card_faces.map((function(e){return e.mana_cost})).join("//"):t.mana_cost).split("//").join("{//}"))&&fe(e).then((function(e){var t=[],n=e.map((function(e){return"{//}"===e?"//":e.split(/(\\|\/)/g).slice(-1)[0].trim()})),o=a.listofManaSymbols.keys().map((function(e){return e.split(/(\\|\/)/g).slice(-1)[0].trim()}));n.forEach((function(e){if("//"===e)t.push("//");else if(o.includes(e)){var n=a.listofManaSymbols(a.listofManaSymbols.keys().filter((function(t){return t.includes(e)})));t.push(n)}})),JSON.stringify(t)!==JSON.stringify(a.state.listofSVGs)&&a.setState({listofSVGs:t})})).catch((function(e){alert(e.message)}))},a.renderManaSymbol=function(e){return o.a.createElement("div",null,o.a.createElement("object",{data:e,type:"image/svg+xml",style:a.props.size},o.a.createElement("img",{src:e,alt:"imgSym",style:a.props.size})))},a.state={listofSVGs:[]},a.listofManaSymbols=me.retrieveWebkit(),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return this.updateManaCost(),this.state.listofSVGs===[]?null:this.state.listofSVGs.map((function(t){return"//"===t?o.a.createElement("div",null,"//"):e.renderManaSymbol(t)}))}}]),t}(n.Component),be={display:"block",padding:"auto auto",margin:"auto auto",height:"100%",width:"100%",font:"15px black","font-weight":"bold"},ve=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderRowElement=function(){if("[]"!==JSON.stringify(a.state.item)){var e=a.state.item[0];return o.a.createElement("div",null,o.a.createElement("div",{class:a.props.resBoxCSS},o.a.createElement("div",{class:"collection_elem_image_panel"},o.a.createElement(Z,{cardObj:e,imgType:{type:"normal"}})),o.a.createElement("div",{style:{flex:1}},a.state.id_key),o.a.createElement("div",{style:{flex:2}},e.name),o.a.createElement("div",{style:{flex:2}},o.a.createElement("div",{class:"collection_table_mana_cost"},o.a.createElement(he,{cardObj:e,size:{width:"20px",height:"auto"}}))),o.a.createElement("div",{style:{flex:1}},e.rarity.substring(0,1).toUpperCase()),o.a.createElement("div",{style:{flex:3}},e.type_line),o.a.createElement("div",{style:{flex:3}},"".concat(e.set_name," [").concat(e.set.toUpperCase(),"]")),o.a.createElement("div",{style:{flex:1}},e.set_id.toUpperCase()),o.a.createElement("div",{style:{flex:1}},a.props.cardInfo.is_foil?o.a.createElement("b",null,"Yes"):"No"),o.a.createElement("div",{style:{flex:1}},a.props.cardInfo.is_foil?null===e.prices.usd_foil?"N/A":"$".concat(e.prices.usd_foil):null===e.prices.usd?"N/A":"$".concat(e.prices.usd)),o.a.createElement("div",{style:{flex:1}},a.props.cardInfo.amt),o.a.createElement("div",{style:{flex:1,"text-align":"center"}},o.a.createElement("button",{style:be,onClick:a.handleAddCard},o.a.createElement("div",null,"Add Card"))),o.a.createElement("div",{style:{flex:1,"text-align":"center"}},o.a.createElement("button",{style:be,onClick:a.handleRemoveCard},o.a.createElement("div",null,"Remove Card")))))}return null},a.loadRowObjs=function(){fetch("/api/collections/fetch-card-object",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({card_id:a.props.cardInfo.card_id})}).then((function(e){return e.json()})).then((function(e){0!==e.length&&JSON.stringify(a.state.item)!==JSON.stringify(e)&&a.setState({item:e,id_key:a.props.id_key})})).catch((function(e){alert(e.message)}))},a.handleAddCard=function(e){e.preventDefault();var t=a.state.item[0];fetch("/api/collections/add-card-to-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chosenIsFoil:a.props.cardInfo.is_foil,set:t.set,set_id:t.set_id,collectionID:O.getCollectionID()})}).then((function(){a.props.updateTopmostState()})).catch((function(e){alert(e.message)}))},a.handleRemoveCard=function(e){e.preventDefault();var t=a.state.item[0];fetch("/api/collections/remove-card-from-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chosenIsFoil:a.props.cardInfo.is_foil,set:t.set,set_id:t.set_id,collectionID:O.getCollectionID()})}).then((function(e){a.props.updateTopmostState()})).catch((function(e){alert(e.message)}))},a.state={item:[],id_key:a.props.id_key},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){alert("CollectionTableElement "+e)}},{key:"render",value:function(){return this.loadRowObjs(),this.renderRowElement()}}]),t}(n.Component),ge=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderNavPanel=function(){return o.a.createElement("div",{class:"nav_panel_wrapper"},0===a.props.totalElems?null:o.a.createElement("div",{style:{width:"98.3%"},class:"nav_panel_elements"},o.a.createElement("div",{class:"nav_inline nav_horizontal_padding"},"Page:"),o.a.createElement("div",{class:"nav_inline nav_horizontal_padding"},a.renderPageNavigator()),o.a.createElement("div",{class:"nav_inline"},"/  ".concat(a.state.maxPages))))},a.renderPageNavigator=function(){return o.a.createElement("select",{value:a.props.currPage,onChange:a.handleAnyPage,class:"page_nav_text_input"},new Array(a.state.maxPages).fill(0).map((function(e,t){return o.a.createElement("option",{value:t+1},t+1)})))},a.loadDisabled=function(){var e=1===a.props.currPage,t=!(a.props.currPage<Math.ceil(a.props.totalElems/a.props.elemPerPage));t===a.state.nextDisabled&&e===a.state.lastDisabled||a.setState({nextDisabled:t,lastDisabled:e})},a.handlePrevPage=function(e){e.preventDefault(),a.props.currPage-1>=1&&a.props.currPage-1<=a.state.maxPages&&a.props.handleChangeAnyPage(a.props.currPage-1)},a.handleAnyPage=function(e){e.preventDefault();var t=parseInt(e.target.value)?parseInt(e.target.value):"";a.props.handleChangeAnyPage(t)},a.handleNextPage=function(e){e.preventDefault(),a.props.currPage+1>=1&&a.props.currPage+1<=a.state.maxPages&&a.props.handleChangeAnyPage(a.props.currPage+1)},a.state={lastDisabled:!0,nextDisabled:!0,maxPages:Math.ceil(Math.max(1,a.props.totalElems/a.props.elemPerPage)),navPage:a.props.currPage},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.loadDisabled(),this.renderNavPanel()}}]),t}(n.Component),ye=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderNavPanel=function(){return o.a.createElement("div",null,o.a.createElement(ge,{handleChangeAnyPage:a.handleChangeAnyPage.bind(Object(H.a)(a)),currPage:a.state.page,elemPerPage:a.state.elemPerPage,totalElems:a.props.collectionList.length,disableAll:a.state.disableAll}))},a.renderTableTitle=function(){return o.a.createElement("div",{class:"collection_table_title"},o.a.createElement("div",{style:{flex:3}}),o.a.createElement("div",{style:{flex:1}},"NO."),o.a.createElement("div",{style:{flex:2}},"CARD NAME"),o.a.createElement("div",{style:{flex:2}},"MANA"),o.a.createElement("div",{style:{flex:1}},"RARITY"),o.a.createElement("div",{style:{flex:3}},"TYPE"),o.a.createElement("div",{style:{flex:3}},"SET"),o.a.createElement("div",{style:{flex:1}},"ID"),o.a.createElement("div",{style:{flex:1}},"FOIL"),o.a.createElement("div",{style:{flex:1}},"PRICE"),o.a.createElement("div",{style:{flex:1}},"AMT"),o.a.createElement("div",{style:{flex:1}}),o.a.createElement("div",{style:{flex:1}}))},a.renderTableBody=function(){if(0!==a.props.collectionList.length){var e=a.loadSortedList();return o.a.createElement("div",null,a.renderTableElems(e),a.renderNavPanel())}return o.a.createElement("div",null,"You have no cards in collection.")},a.renderTableElems=function(e){var t="collection_result_gray";return e.map((function(e,n){return t="collection_result_gray"===t?"collection_result_white":"collection_result_gray",n<a.state.page*a.state.elemPerPage&&n>=(a.state.page-1)*a.state.elemPerPage?o.a.createElement(ve,{id_key:n+1,cardInfo:e,resBoxCSS:t,updateTopmostState:a.props.updateState}):null}))},a.loadSortedList=function(){var e=JSON.stringify(a.props.collectionList).valueOf();return(e=JSON.parse(e)).sort((function(e,t){return e.card_name.localeCompare(t.card_name)||e.set_code.localeCompare(t.set_code)||e.is_foil-t.is_foil})),e},a.handleChangeAnyPage=function(e){a.setState({page:e})},a.state={username:O.getSessionUser(),userID:O.getSessionUserID(),collectionID:O.getCollectionID(),collectionName:O.getCollectionName(),page:1,elemPerPage:10,disableAll:!1},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("CollectionTable "+e+" "+JSON.stringify(t))}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderNavPanel(),this.renderTableTitle(),this.renderTableBody())}}]),t}(n.Component),Se=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderNavigationPanel=function(){return o.a.createElement(ge,{handleChangeAnyPage:a.handleChangeAnyPage.bind(Object(H.a)(a)),currPage:a.state.page,elemPerPage:a.state.elemPerPage,totalElems:a.props.collectionList.length,disableAll:a.state.disableAll})},a.renderTable=function(){return o.a.createElement("div",null,0===a.state.list.length?null:o.a.createElement("div",null,a.renderListPanel(),a.renderNavigationPanel()))},a.renderListPanel=function(){var e=a.loadDefaultSortedList();switch(a.state.currIndex){case"CMC":return a.renderListByCMC(e);case"Colors":return a.renderListByColors(e);case"Set":return a.renderListBySet(e);case"Price":return a.renderListByPrice(e);default:return a.renderListDefaultSort(e)}},a.renderListElement=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=(e=JSON.parse(JSON.stringify(e.valueOf()))).is_foil?"*FOIL*":"",n=e.is_foil?e.prices.usd_foil:e.prices.usd,l=t?null===n?" N/A> ":e.amt>1?" $".concat(Number.parseFloat(n*e.amt).toFixed(2)," (").concat(e.amt,"x $").concat(Number.parseFloat(n).toFixed(2),")> "):" $".concat(Number.parseFloat(n).toFixed(2),"> "):"";return o.a.createElement("div",null,o.a.createElement("div",{style:{fontWeight:"bold",display:"inline-block"}},"".concat(l)),o.a.createElement("div",{style:{display:"inline-block"}},"".concat(e.amt,"x ").concat(e.name," [").concat(e.set.toUpperCase(),"] ").concat(a)))},a.renderDropdownPanel=function(){return o.a.createElement("div",{id:"list_sort_panel"},o.a.createElement("div",{id:"sortby_position"},"Sort By: "),o.a.createElement("select",{id:"sort",style:{display:"inline-block",width:"200px"},onChange:a.handleSortMethodChange,value:a.state.currIndex},a.sortIndices.map((function(e){return o.a.createElement("option",{value:e},"".concat(e))}))))},a.renderListByPrice=function(e){var t=JSON.stringify(e).valueOf();return(t=JSON.parse(t)).sort((function(e,t){var a=e.is_foil?e.prices.usd_foil:e.prices.usd;return(t.is_foil?t.prices.usd_foil:t.prices.usd)*t.amt-a*e.amt})),a.renderListDefaultSort(t,!0)},a.renderListDefaultSort=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=JSON.stringify(e).valueOf();return(n=JSON.parse(n)).map((function(e,n){return n<a.state.page*a.state.elemPerPage&&n>=(a.state.page-1)*a.state.elemPerPage?o.a.createElement("div",null,a.renderListElement(e,t)):null}))},a.renderListByType=function(e){},a.renderListBySet=function(e){var t=JSON.stringify(e).valueOf();return(t=JSON.parse(t)).sort((function(e,t){return e.set.localeCompare(t.set)})),a.renderListDefaultSort(t)},a.renderListByCMC=function(e){e=JSON.stringify(e).valueOf(),(e=JSON.parse(e)).sort((function(e,t){return t.cmc-e.cmc}));var t=-1;return e.map((function(e,n){return n<a.state.page*a.state.elemPerPage&&n>=(a.state.page-1)*a.state.elemPerPage?t!==e.cmc?(t=e.cmc,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h3",null,"CMC: ".concat(e.cmc))),o.a.createElement("div",null,a.renderListElement(e)))):o.a.createElement("div",null,a.renderListElement(e)):null}))},a.renderListByColors=function(e){e=JSON.stringify(e).valueOf();var t=(e=JSON.parse(e)).filter((function(e){return e.colors.length>1})),n=e.filter((function(e){return 0===e.colors.length})),l=e.filter((function(e){return 1===e.colors.length}));l.sort((function(e,t){return e.colors[0].localeCompare(t.colors[0]||e.name.localeCompare(t.name)||e.set.localeCompare(t.set)||e.is_foil-t.is_foil)}));var s={index:0};return o.a.createElement("div",null,a.renderMulticolorSublist(t,s),a.renderMonocolorSublist(l,s),a.renderColorlessSublist(n,s))},a.renderMulticolorSublist=function(e,t){var n=!1;return e.map((function(e,l){return t.index<a.state.page*a.state.elemPerPage&&t.index>=(a.state.page-1)*a.state.elemPerPage?(t.index+=1,0!==l&&n?o.a.createElement("div",null,a.renderListElement(e)):(n=!0,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h3",null,"Multicolored")),o.a.createElement("div",null,a.renderListElement(e))))):(t.index+=1,null)}))},a.renderMonocolorSublist=function(e,t){var n=!1,l="",s={W:"White",U:"Blue",B:"Black",R:"Red",G:"Green"};return e.map((function(e){return t.index<a.state.page*a.state.elemPerPage&&t.index>=(a.state.page-1)*a.state.elemPerPage?(t.index+=1,e.colors[0]===l&&n?o.a.createElement("div",null,a.renderListElement(e)):(l=e.colors[0],n=!0,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h3",null,s[e.colors[0]])),o.a.createElement("div",null,a.renderListElement(e))))):(t.index+=1,null)}))},a.renderColorlessSublist=function(e,t){var n=!1;return e.map((function(e,l){return t.index<a.state.page*a.state.elemPerPage&&t.index>=(a.state.page-1)*a.state.elemPerPage?(t.index+=1,0!==l&&n?o.a.createElement("div",null,a.renderListElement(e)):(n=!0,o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h3",null,"Colorless")),o.a.createElement("div",null,a.renderListElement(e))))):(t.index+=1,null)}))},a.loadList=function(){var e=a.props.collectionList.map((function(e){return e.card_id})),t=a.props.collectionList.map((function(e){return e.is_foil})),n=a.props.collectionList.map((function(e){return e.amt}));fetch("/api/cards/fetch-card-attribute",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({lstOfIds:e,is_foil:t,amt:n,opts:a.sortIndexKeys})}).then((function(e){return e.json()})).then((function(e){JSON.stringify(a.state.list)!==JSON.stringify(e)&&a.setState({list:e})}))},a.loadDefaultSortedList=function(){var e=JSON.stringify(a.state.list).valueOf();return(e=JSON.parse(e)).sort((function(e,t){return e.name.localeCompare(t.name)||e.set.localeCompare(t.set)||e.is_foil-t.is_foil})),e},a.handleSortMethodChange=function(e){e.preventDefault(),a.setState({currIndex:e.target.value})},a.handleChangeAnyPage=function(e){a.setState({page:e})},a.state={username:O.getSessionUser(),userID:O.getSessionUserID(),collectionID:O.getCollectionID(),collectionName:O.getCollectionName(),page:1,elemPerPage:50,currIndex:"Name",disableAll:!1,list:[]},a.sortIndices=["Name","Type","CMC","Colors","Set","Price","Amount"],a.sortIndexKeys=["name","type_line","cmc","colors","set","prices","amt"],a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("CollectionTableListForm "+e+JSON.stringify(t))}},{key:"render",value:function(){return this.loadList(),o.a.createElement("div",null,this.renderNavigationPanel(),this.renderDropdownPanel(),this.renderTable())}}]),t}(n.Component),_e={display:"block",position:"absolute",padding:"0",top:"50",left:"50",height:"auto",width:"200px","z-index":"10"},Oe={display:"none"},Ee=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).handleMouseEnter=function(e){e.preventDefault();var t=Object(B.a)({},a.state.boxStyle);t.backgroundColor="blue",t.color="white",a.setState({boxStyle:t}),a.showImage()},a.handleMouseLeave=function(e){e.preventDefault();var t=Object(B.a)({},a.state.boxStyle);t.backgroundColor="white",t.color="black",a.setState({boxStyle:t}),a.hideImage()},a.handleCardMouseDown=function(e){e.preventDefault();var t=Object(B.a)({},a.state.nonfoilBox);t.backgroundColor="grey",t.color="white",a.setState({nonfoilBox:t})},a.handleFoilMouseDown=function(e){e.preventDefault();var t=Object(B.a)({},a.state.foilBox);t.backgroundColor="grey",t.color="white",a.setState({foilBox:t})},a.handleCardMouseUp=function(e){e.preventDefault();var t=Object(B.a)({},a.state.nonfoilBox),n=Object(B.a)({},a.state.foilBox);t.backgroundColor=void 0,t.color=void 0,n.backgroundColor=void 0,n.color=void 0,a.setState({nonfoilBox:t,foilBox:n})},a.selectFoil=function(e){e.preventDefault(),fetch("/api/collections/add-card-to-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chosenIsFoil:!0,set:a.props.item.set,set_id:a.props.item.set_id,collectionID:a.state.collectionID})}).then((function(e){a.props.updateTopmostState()}))},a.selectCard=function(e){e.preventDefault(),fetch("/api/collections/add-card-to-collection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({chosenIsFoil:!1,set:a.props.item.set,set_id:a.props.item.set_id,collectionID:a.state.collectionID})}).then((function(e){return e.json()})).then((function(e){a.props.updateTopmostState()}))},a.showImage=function(){a.setState({imageCSS:_e})},a.hideImage=function(){a.setState({imageCSS:Oe})},a.state={boxStyle:{border:"1px orange solid",position:"relative",display:"flex",left:"0",right:"0",margin:"0 0 0 0",backgroundColor:"white",color:"black"},titleBox:{position:"relative",left:"0",height:"100%",width:"70%"},selectBox:{position:"relative",right:"0",height:"100%",width:"30%"},nonfoilBox:{border:"1px black dotted",position:"relative",width:"100%",margin:"0"},foilBox:{border:"1px black dotted",position:"relative",width:"100%",margin:"0"},imageCSS:Oe,collectionID:O.getCollectionID()},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("SearchBoxElement "+e)}},{key:"render",value:function(){return o.a.createElement("div",{style:this.state.boxStyle,onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},this.props.item.image_uris?o.a.createElement("img",{src:this.props.item.image_uris.border_crop,alt:this.props.item.name,style:this.state.imageCSS}):null,o.a.createElement("div",{style:this.state.titleBox},o.a.createElement("div",{style:{width:"100%",height:"100%"}},"".concat(this.props.item.name," (").concat(this.props.item.set_name,")"))),o.a.createElement("div",{style:this.state.selectBox,onMouseEnter:this.hideImage,onMouseLeave:this.showImage},this.props.item.nonfoil?o.a.createElement("div",{type:"button",style:this.state.nonfoilBox,onMouseDown:this.handleCardMouseDown,onMouseUp:this.handleCardMouseUp,onClick:this.selectCard},"Add Card ",null===this.props.item.prices.usd?"(Price Unavailable)":"(USD$".concat(this.props.item.prices.usd,")")):null,this.props.item.foil?o.a.createElement("div",{type:"button",style:this.state.foilBox,onMouseDown:this.handleFoilMouseDown,onMouseUp:this.handleCardMouseUp,onClick:this.selectFoil},"Add Foil Card ",null===this.props.item.prices.usd_foil?"(Price Unavailable)":"(USD$".concat(this.props.item.prices.usd_foil,")")):null))}}]),t}(n.Component),Ce=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).changeHandler=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n})))},(function(){M("/api/cards/query-card",(function(e,t){t?alert(t):JSON.stringify(e)!==JSON.stringify(a.state.searchResultsList)&&a.setState({searchResultsList:e})}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).catch((function(e){alert(e)}))}))},a.renderSearchBox=function(){return o.a.createElement("div",null,o.a.createElement("div",{style:{backgroundColor:"gray"}},o.a.createElement("div",null,"Search Card:  ",o.a.createElement("input",{type:"text",name:"cardName",value:a.state.formControls.cardName.value,onChange:a.changeHandler,style:{width:"70%",right:0}}))),o.a.createElement("div",{style:{backgroundColor:"gray",height:"2px"}}))},a.state={formControls:{cardName:{value:""}},searchResultsList:[]},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("SearchBox "+e+t)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,this.renderSearchBox(),o.a.createElement("div",{class:"searchbox_dropdown"},this.state.searchResultsList.map((function(t){return o.a.createElement(Ee,{item:t,updateTopmostState:e.props.updateState})}))))}}]),t}(n.Component),je=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderButtonMenu=function(){return o.a.createElement("div",{class:"toolbar_buttons"},o.a.createElement("div",{style:{display:"inline-block"}},o.a.createElement(j,null)),o.a.createElement("div",{style:{display:"inline-block"}},a.state.asList?o.a.createElement(de,{onClick:a.handleViewSwitch}):o.a.createElement(ue,{onClick:a.handleViewSwitch})))},a.renderSearchBar=function(){return o.a.createElement("div",{class:"search_bar_main"},o.a.createElement(Ce,{updateState:a.updateState}))},a.renderCollectionBar=function(){return o.a.createElement("div",{class:"collection_bar_main"},o.a.createElement("div",{class:"collection_title"},o.a.createElement("h1",null,a.state.collectionName),o.a.createElement("p",null,a.state.description)),a.renderCardTable())},a.renderCardTable=function(){return o.a.createElement("div",null,a.state.asList?o.a.createElement(Se,{updateState:a.updateState,collectionList:a.state.cardTableProps.collectionList,postResponse:a.state.postResponse}):o.a.createElement(ye,{updateState:a.updateState,collectionList:a.state.cardTableProps.collectionList,postResponse:a.state.postResponse}))},a.loadTable=function(){M("/api/collections/fetch-collection-by-id",(function(e,t){if(t)alert(t);else{var n=Object(B.a)({},a.state.cardTableProps,{postResponse:0===e.list.length?"You have no cards in collection.":"",collectionList:e.list});JSON.stringify(e.list)===JSON.stringify(a.state.cardTableProps.collectionList)&&""!==a.state.collectionName||a.setState({cardTableProps:n,collectionName:e.name,description:e.description})}}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})},a.handleViewSwitch=function(e){e.preventDefault(),a.setState({asList:!a.state.asList})},a.updateState=function(){a.setState(Object(B.a)({},a.state))},a.state={userID:O.getSessionUserID(),userName:O.getSessionUser(),collectionID:ie().id,collectionName:"",description:"",cardTableProps:{collectionList:[],postResponse:"Fetching data..."},asList:!0},O.setCollectionName(a.state.collection),O.setCollectionID(a.state.collectionID),a.updateState=a.updateState.bind(Object(H.a)(a)),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e,t){alert("CollectionPage "+e)}},{key:"render",value:function(){return this.loadTable(),o.a.createElement("div",null,this.renderButtonMenu(),this.renderSearchBar(),this.renderCollectionBar())}}]),t}(n.Component),xe=(a(113),function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderSetupDBForm=function(){return o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement("div",{class:"setup_page_default_padding"},"--- Change Database Setup ---"),o.a.createElement("div",{class:"setup_page_default_padding"}),o.a.createElement("form",{method:"post",onSubmit:a.handleSubmit,class:"change_setup_border_".concat(a.state.correctBoxCSS)},o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement("button",{onClick:a.handleTestConnection,disabled:a.state.disableAll},"Test Database Connection"),a.state.testResponse),o.a.createElement("title",null,"Database Details"),o.a.createElement("div",{class:"setup_page_default_padding"},"Host/Port:",o.a.createElement("input",{type:"text",name:"host",value:a.state.formControls.host.value,onChange:a.handleChange}),":",o.a.createElement("input",{type:"number",name:"port",value:a.state.formControls.port.value,onChange:a.handleChange,min:"0",max:"65535"})),o.a.createElement("div",{class:"setup_page_default_padding"},"Database:",o.a.createElement("input",{type:"text",name:"database",value:a.state.formControls.database.value,onChange:a.handleChange})),o.a.createElement("div",{class:"setup_page_default_padding"},"User:",o.a.createElement("input",{type:"text",name:"user",value:a.state.formControls.user.value,onChange:a.handleChange}),"Password:",o.a.createElement("input",{type:a.state.passwordType,name:"password",value:a.state.formControls.password.value,onChange:a.handleChange}),o.a.createElement("button",{onMouseDown:a.handleShowPassword,onMouseUp:a.handleHidePassword,onClick:function(e){e.preventDefault()}},"Show Password")),o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement("button",{type:"submit",disabled:!("success"===a.state.correctBoxCSS)||a.state.disableAll},"success"!==a.state.correctBoxCSS?"Please Test Connection...":"Submit"),o.a.createElement("button",{onClick:a.handleCancel},"Cancel")),o.a.createElement("div",{class:"setup_page_default_padding"})))},a.loadDefault=function(){JSON.stringify(a.state.formControls)!==JSON.stringify(a.props.defaultResult)&&a.setState({formControls:a.props.defaultResult})},a.handleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n}))),correctBoxCSS:"untested",testResponse:""},""===a.props.postResponse?void 0:a.props.setTopState({postResponse:""}))},a.handleCancel=function(e){e.preventDefault(),a.props.setTopState({changeSetup:!1,postResponse:""})},a.handleTestConnection=function(e){e.preventDefault(),a.setState({disableAll:!0},(function(){M("/api/DBSetup/test-connection",(function(e,t){t?alert(t):e?a.setState({correctBoxCSS:"success",testResponse:"Test Success!",disableAll:!1}):a.setState({correctBoxCSS:"failed",testResponse:"Test Failure.",disableAll:!1})}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})}))},a.handleSubmit=function(e){e.preventDefault(),M("/api/DBSetup/update-db-info",(function(e,t){var n;t?alert(t):(n=e?"Success! Database changed.":"Setup Failed. Please try again.",a.setState({testResponse:"",correctBoxCSS:"untested"},a.props.setTopState({postResponse:n})))}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})},a.handleShowPassword=function(e){e.preventDefault(),a.setState({passwordType:"text"})},a.handleHidePassword=function(e){e.preventDefault(),a.setState({passwordType:"password"})},a.state={formControls:{host:{value:""},port:{value:""},database:{value:""},user:{value:""},password:{value:""},status:{value:""}},testResponse:"",passwordType:"password",correctBoxCSS:"untested",disableAll:!1},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.loadDefault()}},{key:"render",value:function(){return o.a.createElement("div",null,this.renderSetupDBForm())}}]),t}(n.Component)),Pe=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderCurrentSettingsTable=function(){return o.a.createElement("div",null,o.a.createElement("div",{id:"setup_current_settings_table"},o.a.createElement("div",{class:"title_cell"},"HOST"),o.a.createElement("div",{class:"title_cell"},"PORT"),o.a.createElement("div",{class:"title_cell"},"DB"),o.a.createElement("div",{class:"title_cell"},"USERNAME"),o.a.createElement("div",{class:"title_cell"},"STATUS"),o.a.createElement("div",{class:"cell"},a.state.currentSetting.HOST),o.a.createElement("div",{class:"cell"},a.state.currentSetting.PORT),o.a.createElement("div",{class:"cell"},a.state.currentSetting.DB),o.a.createElement("div",{class:"cell"},a.state.currentSetting.USER),o.a.createElement("div",{class:"cell ".concat("working"===a.state.currentSetting.STATUS?"font_green":"not working"===a.state.currentSetting.STATUS?"font_orange":"font_red"," bold")},"working"===a.state.currentSetting.STATUS?"ONLINE, WORKING":"not working"===a.state.currentSetting.STATUS?"ONLINE, FAILED TABLE INTEGRITY TEST":"OFFLINE")))},a.loadDefault=function(){if(a.props.defaultResult){var e={HOST:a.props.defaultResult.host.value,PORT:a.props.defaultResult.port.value,DB:a.props.defaultResult.database.value,USER:a.props.defaultResult.user.value,STATUS:a.props.defaultResult.status.value};JSON.stringify(e)!==JSON.stringify(a.state.currentSetting)&&a.setState({currentSetting:e,report:a.props.defaultResult.report.value})}},a.state={currentSetting:"",report:""},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.loadDefault(),o.a.createElement("div",null,this.renderCurrentSettingsTable())}}]),t}(n.Component),De=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderCreateDBForm=function(){return o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement("div",{class:"setup_page_default_padding"},"--- Create New Database ---"),o.a.createElement("div",{class:"setup_page_default_padding"}),o.a.createElement("form",{method:"post",onSubmit:a.handleSubmit,class:"change_setup_border_".concat(a.state.correctBoxCSS)},o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement("button",{onClick:a.handleTestConnection,disabled:a.state.disableAll},"Test Name Availability"),a.state.testResponse),o.a.createElement("div",{class:"setup_page_default_padding"},"New Database Name:",o.a.createElement("input",{type:"text",name:"database",value:a.state.formControls.database.value,onChange:a.handleChange,disabled:a.state.disableAll,placeholder:"Insert name here."})),o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement("button",{type:"submit",disabled:!("success"===a.state.correctBoxCSS)||a.state.disableAll},"success"!==a.state.correctBoxCSS?"Please Test Availabilty...":"Submit (Database will be changed on Success)"),o.a.createElement("button",{onClick:a.handleCancel},"Cancel")),o.a.createElement("div",{class:"setup_page_default_padding"})))},a.handleChange=function(e){e.preventDefault();var t=e.target.name,n=e.target.value;a.setState({formControls:Object(B.a)({},a.state.formControls,Object(L.a)({},t,Object(B.a)({},a.state.formControls[t],{value:n}))),correctBoxCSS:"untested",testResponse:""},""===a.props.postResponse?void 0:a.props.setTopState({postResponse:""}))},a.handleCancel=function(e){e.preventDefault(),a.props.setTopState({changeSetup:!1,postResponse:""})},a.handleTestConnection=function(e){e.preventDefault(),a.setState({disableAll:!0},(function(){if(!a.state.formControls.database.value.match(/^[A-Za-z0-9_-]{5,}$/))return a.setState({correctBoxCSS:"failed",testResponse:"Name Not Valid. \n                                (The name must be consisting of at least 5 alphanumeric characters, \n                                underscores and dashes.)",disableAll:!1}),null;M("/api/DBSetup/test-db-availability",(function(e,t){t?alert(t):e?a.setState({correctBoxCSS:"success",testResponse:"Database Name Available!",disableAll:!1}):a.setState({correctBoxCSS:"failed",testResponse:"Database Name Taken.",disableAll:!1})}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})}))},a.handleSubmit=function(e){var t;e.preventDefault(),a.setState({disableAll:!0},(function(){M("/api/DBSetup/create-database",(function(e,n){n?(alert(n),t="Setup Failed. Please try again.",a.setState({testResponse:"",correctBoxCSS:"failed",disableAll:!1},a.props.setTopState({postResponse:t}))):(t=e?"Success! Database created.":"Setup Failed. Please try again.",a.setState({testResponse:"",correctBoxCSS:"untested",disableAll:!1},a.props.setTopState({postResponse:t})))}),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)})}))},a.handleShowPassword=function(e){e.preventDefault(),a.setState({passwordType:"text"})},a.handleHidePassword=function(e){e.preventDefault(),a.setState({passwordType:"password"})},a.state={formControls:{database:{value:""}},testResponse:"",correctBoxCSS:"untested",disableAll:!1},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,this.renderCreateDBForm())}}]),t}(n.Component),we=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(c.a)(this,Object(u.a)(t).call(this,e))).renderSetupPage=function(){return o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement("h1",null,"Database Setup")),o.a.createElement("div",null,"Current Settings:"),o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement(Pe,{defaultResult:a.state.defaultResult})),o.a.createElement("div",{class:"setup_page_default_padding"},a.state.changeSetup?1===a.state.changeSetup?o.a.createElement(xe,{setTopState:a.setTopState,postResponse:a.state.postResponse,defaultResult:a.state.defaultResult}):null:o.a.createElement("button",{onClick:a.handleToggleChangeSetup}," Change Setup"),a.state.changeSetup?2===a.state.changeSetup?o.a.createElement(De,{setTopState:a.setTopState,postResponse:a.state.postResponse}):null:o.a.createElement("button",{onClick:a.handleToggleCreateDB,disabled:a.state.offline}," Create New Database"),a.state.changeSetup?null:o.a.createElement("button",{onClick:a.handleTableReload,disabled:a.state.disableAll^!a.state.reloadable||a.state.offline},"Reload Database")),o.a.createElement("div",null,a.state.reloadable?a.state.report:null),o.a.createElement("div",{class:"setup_page_default_padding"},o.a.createElement(E,null),o.a.createElement(x,null)),o.a.createElement("div",{class:"setup_page_default_padding"},a.state.postResponse))},a.handleToggleChangeSetup=function(e){e.preventDefault(),a.setState({changeSetup:1})},a.handleToggleCreateDB=function(e){e.preventDefault(),a.setState({changeSetup:2})},a.handleTableReload=function(e){e.preventDefault(),window.confirm("ARE YOU SURE YOU WANT TO RELOAD TABLES? Doing this WILL override existing tables: users, collection, listing, cards and you will lose all data stored in those tables.")&&a.setState({reloadable:!1},(function(){M("/api/DBSetup/recreate-all-tables",(function(e){a.setState({postResponse:e?"Successfully reloaded tables":"Table reload failed"})}))}))},a.loadDefault=function(){M("/api/DBSetup/get-DB-details",(function(e,t){t||(JSON.stringify(e)!==JSON.stringify(a.state.defaultResult)?a.setState({defaultResult:e,reloadable:!("working"===e.status.value),offline:"offline"===e.status.value,report:JSON.stringify(e.report.value)}):console.log(t))}))},a.setTopState=function(e){a.setState(e)},a.state={changeSetup:!1,postResponse:"",defaultResult:"",reloadable:!1,report:"",offline:!0},a.setTopState=a.setTopState.bind(Object(H.a)(a)),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return this.loadDefault(),o.a.createElement("div",null,this.renderSetupPage())}}]),t}(n.Component),Te=function(e){function t(e){var a;return Object(i.a)(this,t),a=Object(c.a)(this,Object(u.a)(t).call(this,e)),O.initializeSession(),a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidCatch",value:function(e){alert("App Error"+e)}},{key:"render",value:function(){return o.a.createElement(p.a,null,o.a.createElement(m.d,null,o.a.createElement((function(){return o.a.createElement("div",null,o.a.createElement(p.a,null,o.a.createElement(m.d,null,o.a.createElement(m.b,{exact:!0,path:"/home",component:I}),o.a.createElement(m.b,{path:"/userlist",component:R}),o.a.createElement(m.b,{path:"/login"},O.getSessionStatus()?o.a.createElement(m.a,{push:!0,to:"/collections"}):Object(m.h)(V)),o.a.createElement(m.b,{path:"/signup",component:W}),o.a.createElement(m.b,{path:"/setup",component:we}),o.a.createElement(m.b,{path:"/collections",component:function(){if(!O.getSessionStatus())return o.a.createElement(m.a,{push:!0,to:"/login"});switch(ie().page){case"default":return o.a.createElement(m.b,{path:"/collections",component:ee});case"create-new-collection":return o.a.createElement(m.b,{path:"/collections",component:se});case"selected":return o.a.createElement(m.b,{path:"/collections",component:je});case"edit":return o.a.createElement(m.b,{path:"/collections",component:re});default:return o.a.createElement(m.b,{path:"/collections",component:ee})}}}),o.a.createElement(m.b,{path:"/downloads",render:function(){switch(ie().func){case"":return o.a.createElement(m.a,{push:!0,to:"/"});default:return o.a.createElement(m.b,{path:"/downloads",component:ce})}}}),o.a.createElement(m.b,{path:"*",component:function(){return o.a.createElement(m.a,{to:"/home"})}}))))}),null)))}}]),t}(n.Component);a(22);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(Te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}]),[[35,1,2]]]);
//# sourceMappingURL=main.96d1db22.chunk.js.map